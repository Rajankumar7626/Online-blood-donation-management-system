{% extends "base.html" %}

{% block content %}
<div class="page-header mb-4">
  <h1><i class="bi bi-droplet-fill"></i> Donor Registration</h1>
  <p class="text-muted">Register as a blood donor in the system</p>
</div>

<div class="container mt-5 mb-5">
  <div class="row justify-content-center">
    <div class="col-md-8">

      <div class="card shadow-sm">
        <div class="card-header bg-danger text-white">
          <h4 class="mb-0">
            <i class="bi bi-droplet-fill"></i> Register as Blood Donor
          </h4>
        </div>

        <div class="card-body">
          <form method="post" novalidate>
            {% csrf_token %}

            <!-- ðŸ”” Messages -->
            {% if messages %}
              {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                  {{ message }}
                </div>
              {% endfor %}
            {% endif %}

            <!-- Non-field errors -->
            {% if form.non_field_errors %}
              <div class="alert alert-danger">
                {{ form.non_field_errors }}
              </div>
            {% endif %}

            <!-- ================= Personal Info ================= -->
            <h5 class="mt-3">Personal Information</h5>
            <hr>

            <div class="row">
              <div class="col-md-4 mb-3">
                {{ form.first_name.label_tag }}
                {{ form.first_name }}
                {{ form.first_name.errors }}
              </div>

              <div class="col-md-4 mb-3">
                {{ form.middle_name.label_tag }}
                {{ form.middle_name }}
                {{ form.middle_name.errors }}
              </div>

              <div class="col-md-4 mb-3">
                {{ form.last_name.label_tag }}
                {{ form.last_name }}
                {{ form.last_name.errors }}
              </div>
            </div>

            <div class="row">
              <div class="col-md-4 mb-3">
                {{ form.date_of_birth.label_tag }}
                {{ form.date_of_birth }}
                {{ form.date_of_birth.errors }}
              </div>

              <div class="col-md-4 mb-3">
                {{ form.gender.label_tag }}
                {{ form.gender }}
                {{ form.gender.errors }}
              </div>

              <div class="col-md-4 mb-3">
                {{ form.marital_status.label_tag }}
                {{ form.marital_status }}
                {{ form.marital_status.errors }}
              </div>
            </div>

            <!-- ================= Blood ================= -->
            <h5 class="mt-4">Blood Details</h5>
            <hr>

            <div class="row">
              <div class="col-md-6 mb-3">
                {{ form.blood_group.label_tag }}
                {{ form.blood_group }}
                {{ form.blood_group.errors }}
              </div>

              <div class="col-md-6 mb-3">
                {{ form.phone.label_tag }}
                {{ form.phone }}
                {{ form.phone.errors }}
              </div>
            </div>

            <!-- ================= Address ================= -->
            <h5 class="mt-4">Address</h5>
            <hr>

            <div class="mb-3">
              {{ form.address.label_tag }}
              {{ form.address }}
              {{ form.address.errors }}
            </div>

            <div class="row">
              <div class="col-md-4 mb-3">
                {{ form.state.label_tag }}
                {{ form.state }}
                {{ form.state.errors }}
              </div>

              <div class="col-md-4 mb-3">
                {{ form.city.label_tag }}
                {{ form.city }}
                {{ form.city.errors }}
              </div>

              <div class="col-md-4 mb-3">
                {{ form.pincode.label_tag }}
                {{ form.pincode }}
                {{ form.pincode.errors }}
              </div>
            </div>

            <!-- ================= Aadhaar ================= -->
            <h5 class="mt-4">Verification</h5>
            <hr>

            <div class="mb-3">
              {{ form.aadhaar_number.label_tag }}
              {{ form.aadhaar_number }}
              {{ form.aadhaar_number.errors }}
              <small class="text-muted">
                Aadhaar is used only for verification. We store only last 4 digits.
              </small>
            </div>

            <!-- ================= Account ================= -->
            <h5 class="mt-4">Account Details</h5>
            <hr>

            <div class="row">
              <div class="col-md-6 mb-3">
                <label class="form-label">Email *</label>
                <input type="email" name="email" class="form-control" required>
              </div>

              <div class="col-md-6 mb-4">
                <label class="form-label">Password *</label>
                <input type="password" name="password" class="form-control" required minlength="8">
              </div>
            </div>

            <!-- Submit -->
            <div class="text-center">
              <button type="submit" class="btn btn-danger">
                <i class="bi bi-check-circle"></i> Register Donor
              </button>
            </div>

          </form>
        </div>
      </div>

    </div>
  </div>
</div>
{% endblock %}
