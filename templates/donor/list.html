{% extends 'base.html' %}

{% block content %}

<div class="page-header mb-4">
  <h1><i class="bi bi-people-fill"></i> Donors</h1>
  <p class="text-muted">Browse and track registered donors</p>
</div>

<div class="container">

  <!-- ================= Filter ================= -->
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h5 class="mb-3">
        <i class="bi bi-funnel"></i> Search & Filter
      </h5>

      <form method="get" class="row g-2">
        <div class="col-md-4">
          <input type="text"
                 name="blood_group"
                 value="{{ blood_group }}"
                 class="form-control"
                 placeholder="Blood group (e.g. O+)">
        </div>

        <div class="col-md-4">
          <input type="text"
                 name="city"
                 value="{{ city }}"
                 class="form-control"
                 placeholder="City">
        </div>

        <div class="col-md-4 d-flex gap-2">
          <button type="submit" class="btn btn-primary">
            <i class="bi bi-search"></i> Filter
          </button>
          <a href="{% url 'donors:donors-page' %}" class="btn btn-outline-secondary">
            Reset
          </a>
        </div>
      </form>
    </div>
  </div>

  <!-- ================= Donors Table ================= -->
  {% if donors %}
    <div class="table-responsive">
      <table class="table table-striped align-middle">
        <thead class="table-dark">
          <tr>
            <th>Name</th>
            <th>Blood Group</th>
            <th>Phone</th>
            <th>Location</th>
          </tr>
        </thead>
        <tbody>
          {% for donor in donors %}
          <tr>
            <td>{{ donor.full_name }}</td>
            <td>{{ donor.blood_group }}</td>
            <td>{{ donor.phone|default:"â€”" }}</td>
            <td>{{ donor.city }}, {{ donor.state }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="alert alert-info">
      No donors found.
    </div>
  {% endif %}

</div>

{% endblock %}
